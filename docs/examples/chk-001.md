## Problem
Crear **Chromatic Quest**, un juego web de pintar por números con temática de fantasía/magia, donde las imágenes se generan dinámicamente usando Gemini API (Nano Banana) y se convierten automáticamente a formato "paint by numbers".

## Essential Information

### Decisiones del Usuario
- **Plataforma**: Web (navegador)
- **Generación de imágenes**: Gemini API (Nano Banana / Nano Banana Pro)
- **Mecánica**: Con desafíos (contrarreloj, precisión, niveles progresivos - todas las opciones)
- **Persistencia**: LocalStorage (sin backend)
- **API Key**: El usuario ya tiene una API key de Gemini
- **Nombre del juego**: Chromatic Quest

### Stack Técnico Definido
- React 18.x + TypeScript 5.x
- Vite 5.x como bundler
- Tailwind CSS 3.x para estilos
- HTML5 Canvas API para renderizado
- @google/genai SDK para Gemini API

### Algoritmo de Conversión (Imagen → Paint by Numbers)
1. Cargar imagen generada por Gemini (base64 → ImageData)
2. Cuantización de colores con k-means clustering (espacio LAB)
3. Segmentación de regiones con flood-fill
4. Filtrar regiones pequeñas
5. Numeración de regiones con centroide
6. Generar outline con contornos y números

### Sistema de Juego
- **Modos**: Contrarreloj, Precisión, Niveles progresivos
- **Puntuación**: base + time bonus + accuracy bonus + combo
- **Estrellas**: 3 (>95%), 2 (>75%), 1 (>50%)
- **Penalización**: -5 segundos por error

### Sistema de Niveles
- 4 mundos (Criaturas Mágicas, Paisajes Fantásticos, Objetos Mágicos, Personajes)
- 20 niveles con dificultad progresiva (5-20 colores, 15-160 regiones)
- Desbloqueo: completar nivel N desbloquea N+1; 10 estrellas desbloquean siguiente mundo

### Issues Creados (beads)
| ID | Fase | Estado |
|-----|------|--------|
| `lores-land-1am` | Fase 1: Núcleo del Juego | Ready |
| `lores-land-e9d` | Fase 2: Integración Gemini | Blocked by Fase 1 |
| `lores-land-p1a` | Fase 3: Sistema de Juego | Blocked by Fase 2 |
| `lores-land-c8k` | Fase 4: Niveles y Progresión | Blocked by Fase 3 |
| `lores-land-dql` | Fase 5: UX y Polish | Blocked by Fase 4 |

### Gemini API Details
- Modelo: `gemini-2.5-flash-image` (Nano Banana)
- SDK: `@google/genai`
- Respuesta: base64 en `inlineData`
- Config: `responseModalities: ['IMAGE']`, `aspectRatio: '1:1'`, `imageSize: '1K'`

### Archivos del Plan
- Plan completo: `/Users/mabrax/.claude/plans/crispy-snuggling-kahn.md`
- Cada issue tiene descripción autocontenida con checklist, criterios de aceptación y notas técnicas
