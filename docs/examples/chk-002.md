## Problem
Crear **Chromatic Quest**, un juego web de pintar por números con temática de fantasía/magia, donde las imágenes se generan dinámicamente usando Gemini API (Nano Banana) y se convierten automáticamente a formato "paint by numbers".

## Essential Information

### Decisiones del Usuario
- **Plataforma**: Web (navegador)
- **Generación de imágenes**: Gemini API (Nano Banana / Nano Banana Pro)
- **Mecánica**: Con desafíos (contrarreloj, precisión, niveles progresivos - todas las opciones)
- **Persistencia**: LocalStorage (sin backend)
- **API Key**: El usuario ya tiene una API key de Gemini
- **Nombre del juego**: Chromatic Quest

### Stack Técnico Implementado
- React 19.x + TypeScript 5.x
- Vite 7.x como bundler
- Tailwind CSS 4.x para estilos (con @tailwindcss/postcss)
- HTML5 Canvas API para renderizado

### Fase 1 Completada: Núcleo del Juego
**Archivos creados:**
- `src/types/index.ts` - Tipos TypeScript (Color, LABColor, Region, PaintByNumbersData, GameState)
- `src/utils/colorQuantizer.ts` - K-means clustering con espacio LAB, conversiones RGB↔LAB
- `src/utils/regionDetector.ts` - Flood-fill, detección de regiones, generación de outline
- `src/hooks/useCanvas.ts` - Hook para manejo del canvas
- `src/components/Canvas/GameCanvas.tsx` - Componente de canvas interactivo
- `src/components/ColorPalette/ColorPalette.tsx` - Paleta de colores numerada con progreso
- `src/App.tsx` - Integración completa con UI

**Funcionalidades implementadas:**
- Cargar imagen de muestra o subir propia
- Cuantización de colores configurable (5-20 colores)
- Segmentación de regiones con flood-fill (mínimo 50 pixels)
- Detección de bordes para outline
- Click para pintar regiones
- Estadísticas en tiempo real (regions, painted, correct, accuracy)
- Modal de completado con estrellas (95%=3, 75%=2, else=1)
- Funcionalidad de reset

**Estado del build:**
- Build exitoso sin errores
- Lint pasando sin warnings
- Dev server corriendo en http://localhost:5173/

### Fases Pendientes (beads)
| ID | Fase | Estado |
|-----|------|--------|
| `lores-land-1am` | Fase 1: Núcleo del Juego | In Progress (completada, pendiente de aprobación) |
| `lores-land-e9d` | Fase 2: Integración Gemini | Blocked by Fase 1 |
| `lores-land-p1a` | Fase 3: Sistema de Juego | Blocked by Fase 2 |
| `lores-land-c8k` | Fase 4: Niveles y Progresión | Blocked by Fase 3 |
| `lores-land-dql` | Fase 5: UX y Polish | Blocked by Fase 4 |

### Gemini API Details (para Fase 2)
- Modelo: `gemini-2.5-flash-image` (Nano Banana)
- SDK: `@google/genai`
- Respuesta: base64 en `inlineData`
- Config: `responseModalities: ['IMAGE']`, `aspectRatio: '1:1'`, `imageSize: '1K'`

### Archivos del Plan
- Plan completo: `/Users/mabrax/.claude/plans/crispy-snuggling-kahn.md`
- Proyecto: `/Users/mabrax/Documents/playground/lores-land/chromatic-quest/`

### Instrucción del Usuario
- El usuario solicitó esperar su aprobación después de completar cada fase antes de continuar a la siguiente.
